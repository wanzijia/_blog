(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{286:function(t,n,a){"use strict";a.r(n);var e=a(10),s=Object(e.a)({},(function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),a("h2",{attrs:{id:"有哪些性能指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有哪些性能指标"}},[t._v("#")]),t._v(" 有哪些性能指标")]),t._v(" "),a("h3",{attrs:{id:"常规指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常规指标"}},[t._v("#")]),t._v(" 常规指标")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("FP - first print ：首次绘制时间")])])]),t._v(" "),a("p",[t._v("  首次绘制包括了任何用户自定义的背景绘制，它是将第一个像素点绘制到屏幕的时刻，对于应用⻚面，用户在视觉上首次出现不同于跳转之前的内容时间点，或者说是⻚面发生第一次绘制的时间点")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("FCP - first contented print ：首次有内容绘制时间")])])]),t._v(" "),a("p",[t._v("  指浏览器完成渲染 DOM 中第一个内容的时间点，可能是文本、图像、SVG或者其他任何元素，此时用户应该在视觉上有直观的感受。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("FMP - first meaningful print：首次有意义绘制时间")])])]),t._v(" "),a("p",[t._v("  指⻚面关键元素渲染时间。这个概念并没有标准化定义，因为关键元素可以由开发者自行定义——究竟什么是“有意义”的内容，只有开发者或者产品经理自己了解")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("TTI -  Time to Interactive：用户可交互时间")])])]),t._v(" "),a("p",[t._v("  顾名思义，也就是用户可以与应用进行交互的时间。一般来讲，我们认为是 domready 的时间，因为我们通常会在这时候绑定事件操作。如果⻚面中涉及交互的脚本没有下载完成，那么当然没有到达所谓的用户可交互时间。那么如何定义 domready 时间呢")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("TTFB - time for first byte：网络请求耗时")])])]),t._v(" "),a("p",[t._v("  TTFB是发出⻚面请求到接收到应答数据第一个字节所花费的毫秒数")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("DCL：DomContentLoaded")])])]),t._v(" "),a("p"),t._v(" "),a("ul",[a("li",[a("strong",[t._v("L：DOM onload：总下载时间")])])]),t._v(" "),a("p",[t._v("  ⻚面所有资源加载完成所需要的时间。一般可以统计 window.onload 时间，这样可以统计出同步加载的资源全部加载完的耗时。如果⻚面中存在较多异步渲染，也可以将异步渲染全部完成的时间作为总下载时间。")]),t._v(" "),a("ol",[a("li",[t._v("DOMContentLoaded 与 load 事件的区别")])]),t._v(" "),a("p",[t._v("DOMContentLoaded 指的是文档中 DOM 内容加载完毕的时间，也就是说 HTML 结构已经完整。但\n是我们知道，很多⻚面包含图片、特殊字体、视频、音频等其他资源，这些资源由网络请求获取，\nDOM 内容加载完毕时，由于这些资源往往需要额外的网络请求，还没有请求或者渲染完成。而当⻚面上所有资源加载完成后，load 事件才会被触发。因此，在时间线上，load 事件往往会落后于\nDOMContentLoaded 事件。")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("关于 DOMContentLoaded 和 domReady ？")])]),t._v(" "),a("p",[t._v("我们简单说一下，浏览器是从上到下，从左到右，一个个字符串读入，大致可以认为两个同名的开标\n签与闭标签就是一个DOM(有的是没有闭签)，这时就忽略掉它的两个标签间的内容。⻚面上有许多标\n签, 但标签会生成同样多的DOM，因为有的标签下只允许存在特定的子标签，比如tr下面一定是td,th,\nselect下面一定是opgroup,option,而option下面，就算你写了"),a("span"),t._v("，它都会忽略掉，\noption下面只存在文本，这就是我们需要自定义下拉框的缘故。"),a("br"),t._v("\n我们说过, 这顺序是从上到下, 有的元素很简单,会构建得很快,但标签存在src, href属性,它会引用外部\n资源,这就要区别对待了.比如说, script标签,它一定会等src指定的脚本文件加载下来,然后全部执行了\n里面的脚本,才会分析下一个标签.这种现象叫做堵塞.\n堵塞是一种非常致命的现象,因为浏览器渲染引擎是单线程的,如果头部脚本过多过大会导致白屏,影响\n用户体验,因此雅⻁的20军规就有一条提到 ,将所有script标签放到body之后.\n此外, style标签与link标签,它们在加载样式文件时是不会堵塞,但它们一旦异步加载好,就立即开始渲染\n已经构建好的元素节点们, 这可能会引起reflow, 这也影响速度.\n另一个影响DOM树构建的因此是iframe,它也会加载资源, 虽然不会堵塞DOM构建,但它由于是发出\nHTTP请求,而HTTP请求是有限,它会与父标签的其他需要加载外部资源的标签产生竞争。我们经常看\n到一些新闻网,上面会挂许多iframe广告, 这些⻚面一开始加载时就很卡,也是这缘故.\n此外还有object元素, 用来加载flash")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n")])])]),a("p",[t._v("等等，这些东⻄都会影响到DOM树的构建过程.因此在这时候,当我们贸贸然,使用getElementById,\ngetElementsByTagName获取元素,然后操作它们, 就会有很大机率碰到 元素为null的 异常. 这时, 目标\n元素还可以没有转换为DOM节点, 还只是一个普通的字符串呢!\nDOMContentLoaded 与 load 事件的区别\n关于 DOMContentLoaded 和 domReady ？\n6\n很早期, 浏览器提供了一个window.onload方法,但这东⻄是等到所有标签变成DOM,并且外部资源,图\n片,背景音乐什么都加载好才触发, 时间上有点晚.\n幸好,浏览器提供了一个document.readyState属性,当它变成complete时,说明这时机到了\n但这是一个属性,不是一个事件,需要使用不太精确的setInterval轮询\n在标签浏览器, W3C终于绅士地提供了一个DOMContentLoaded事件把这件事解决了。")]),t._v(" "),a("h2",{attrs:{id:"chrome-最新指标-web-vitals"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chrome-最新指标-web-vitals"}},[t._v("#")]),t._v(" chrome 最新指标 web-vitals")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://web.dev/vitals/",target:"_blank",rel:"noopener noreferrer"}},[t._v("web指标"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"lcp-largest-contentful-paint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lcp-largest-contentful-paint"}},[t._v("#")]),t._v(" LCP（Largest Contentful Paint）")]),t._v(" "),a("p",[a("strong",[t._v("good - 2.5sec - middle - 4.0 sec - poor")])]),t._v(" "),a("p",[t._v("衡量⻚面的加载体验，它表示视口内可⻅的最大内容元素的渲染时间。相比 FCP，这个指标可以更加真\n实地反映具体内容加载速度。比如，如果⻚面渲染前有一个 loading 动画，那么 FCP 可能会以 loading\n动画出现的时间为准，而 LCP 定义了 loading 动画加载后，真实渲染出内容的时间。")]),t._v(" "),a("h3",{attrs:{id:"fid-first-input-delay-首次输入延迟"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fid-first-input-delay-首次输入延迟"}},[t._v("#")]),t._v(" FID（First Input Delay）首次输入延迟")]),t._v(" "),a("p",[a("strong",[t._v("good - 100ms - middle - 300ms - poor")])]),t._v(" "),a("p",[t._v("react 18 - 调度器。\n衡量可交互性，它表示用户和⻚面进行首次交互操作所花费的时间。它比 TTI（Time to Interact）更加\n提前，这个阶段虽然⻚面已经显示出部分内容，但并不能完全具备可交互性，对于用户的响应可能会有\n较大的延迟。")]),t._v(" "),a("h3",{attrs:{id:"cls-cumulative-layout-shift"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cls-cumulative-layout-shift"}},[t._v("#")]),t._v(" CLS（Cumulative Layout Shift）")]),t._v(" "),a("p",[a("strong",[t._v("good - 0.1- middle - 0.25 - poor")])]),t._v(" "),a("p",[t._v("衡量视觉稳定性，表示⻚面的整个生命周期中，发生的每个意外的样式移动的所有单独布局更改得分的\n总和。所以这个分数当然越小越好")]),t._v(" "),a("h2",{attrs:{id:"如何获取这些指标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何获取这些指标"}},[t._v("#")]),t._v(" 如何获取这些指标")]),t._v(" "),a("p",[t._v("window.performance")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("navigationStart")]),t._v(" "),a("td",[t._v("加载起始时间，如果没有前一个⻚面的unload,则与fetchStart值相等")])]),t._v(" "),a("tr",[a("td",[t._v("redirectStart")]),t._v(" "),a("td",[t._v("重定向开始时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回开始重定向的fetchStart的值。其他情况，则返回0）")])]),t._v(" "),a("tr",[a("td",[t._v("redirectEnd")]),t._v(" "),a("td",[t._v("重定向结束时间（如果发生了HTTP重定向，每次重定向都和当前文档同域的话，就返回最后一次重定向接受完数据的时间。其他情况则返回0）")])]),t._v(" "),a("tr",[a("td",[t._v("fetchStart")]),t._v(" "),a("td",[t._v("浏览器发起资源请求时，如果有缓存，则返回读取缓存的开始时间")])]),t._v(" "),a("tr",[a("td",[t._v("domainLookupStart")]),t._v(" "),a("td",[t._v("DNS域名开始查询的时间,如果有本地的缓存或keep-alive等，则返回fetchStart")])]),t._v(" "),a("tr",[a("td",[t._v("domainLookupEnd")]),t._v(" "),a("td",[t._v("domainLookupEnd 查询DNS的结束时间。如果没有发起DNS请求，同上")])]),t._v(" "),a("tr",[a("td",[t._v("connectStart")]),t._v(" "),a("td",[t._v("TCP开始建立连接的时间,如果有本地的缓存或keep-alive等,则与fetchStart值相等")])]),t._v(" "),a("tr",[a("td",[t._v("secureConnectionStart")]),t._v(" "),a("td",[t._v("https 连接开始的时间,如果不是安全连接则为0")])]),t._v(" "),a("tr",[a("td",[t._v("connectEnd")]),t._v(" "),a("td",[t._v("TCP完成握手的时间，如果有本地的缓存或keep-alive等，则与 connectStart 值相等")])]),t._v(" "),a("tr",[a("td",[t._v("requestStart")]),t._v(" "),a("td",[t._v("HTTP请求读取真实文档开始的时间,包括从本地缓存读取")])]),t._v(" "),a("tr",[a("td",[t._v("requestEnd")]),t._v(" "),a("td",[t._v("HTTP请求读取真实文档结束的时间,包括从本地缓存读取")])]),t._v(" "),a("tr",[a("td",[t._v("responseStart")]),t._v(" "),a("td",[t._v("返回浏览器从服务器收到（或从本地缓存读取）第一个字节时的Unix毫秒时间戳")])]),t._v(" "),a("tr",[a("td",[t._v("responseEnd")]),t._v(" "),a("td",[t._v("返回浏览器从服务器收到（或从本地缓存读取，或从本地资源读取）最后一个字节时的Unix毫秒时间戳")])]),t._v(" "),a("tr",[a("td",[t._v("unloadEventStart")]),t._v(" "),a("td",[t._v("前一个⻚面的unload的时间戳 如果没有则为0")])]),t._v(" "),a("tr",[a("td",[t._v("unloadEventEnd")]),t._v(" "),a("td",[t._v("与unloadEventStart相对应，返回的是unload函数执行完成的时间戳")])]),t._v(" "),a("tr",[a("td",[t._v("domLoading")]),t._v(" "),a("td",[t._v("这是当前网⻚DOM结构开始解析时的时间戳，是整个过程的起始时间戳，浏览器即将开始解析第一批收到的 HTML 文档字节，此时document.readyState变成loading,并将抛出readyStateChange事件")])]),t._v(" "),a("tr",[a("td",[t._v("domInteractive")]),t._v(" "),a("td",[t._v("返回当前网⻚DOM结构结束解析、开始加载内嵌资源时时间戳,document.readyState 变成interactive，并将抛出readyStateChange事件(注意只是DOM树解析完成,这时候并没有开始加载网⻚内的资源)")])]),t._v(" "),a("tr",[a("td",[t._v("domContentLoaded")]),t._v(" "),a("td",[t._v("网⻚domContentLoaded事件发生的时间")])]),t._v(" "),a("tr",[a("td",[t._v("EventStart")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("domContentLoadedEventEnd")]),t._v(" "),a("td",[t._v("网⻚domContentLoaded事件脚本执行完毕的时间,domReady的时间")])]),t._v(" "),a("tr",[a("td",[t._v("domComplete")]),t._v(" "),a("td",[t._v("DOM树解析完成,且资源也准备就绪的时间,document.readyState变成complete.并将抛出readystatechange事件")])]),t._v(" "),a("tr",[a("td",[t._v("loadEventStart")]),t._v(" "),a("td",[t._v("load 事件发送给文档，也即load回调函数开始执行的时间")])]),t._v(" "),a("tr",[a("td",[t._v("loadEventEnd")]),t._v(" "),a("td",[t._v("load回调函数执行完成的时间")])])])]),t._v(" "),a("h3",{attrs:{id:"相关参数计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关参数计算"}},[t._v("#")]),t._v(" 相关参数计算")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("描述")]),t._v(" "),a("th",[t._v("计算方式")]),t._v(" "),a("th",[t._v("意义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("unload")]),t._v(" "),a("td",[t._v("前一个⻚面卸载耗时")]),t._v(" "),a("td",[t._v("unloadEventEnd – unloadEventStart")]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",[t._v("redirect")]),t._v(" "),a("td",[t._v("重定向耗时")]),t._v(" "),a("td",[t._v("redirectEnd – redirectStart")]),t._v(" "),a("td",[t._v("重定向的时间")])]),t._v(" "),a("tr",[a("td",[t._v("appCache")]),t._v(" "),a("td",[t._v("缓存耗时")]),t._v(" "),a("td",[t._v("domainLookupStart – fetchStart")]),t._v(" "),a("td",[t._v("读取缓存的时间")])]),t._v(" "),a("tr",[a("td",[t._v("dns")]),t._v(" "),a("td",[t._v("DNS 解析耗时")]),t._v(" "),a("td",[t._v("domainLookupEnd – domainLookupStart")]),t._v(" "),a("td",[t._v("可观察域名解析服务是否正常")])]),t._v(" "),a("tr",[a("td",[t._v("tcp")]),t._v(" "),a("td",[t._v("TCP 连接耗时")]),t._v(" "),a("td",[t._v("connectEnd – connectStart")]),t._v(" "),a("td",[t._v("建立连接的耗时")])]),t._v(" "),a("tr",[a("td",[t._v("ssl")]),t._v(" "),a("td",[t._v("SSL 安全连接耗时")]),t._v(" "),a("td",[t._v("connectEnd – secureConnectionStart")]),t._v(" "),a("td",[t._v("反映数据安全连接建立耗时")])]),t._v(" "),a("tr",[a("td",[t._v("ttfb")]),t._v(" "),a("td",[t._v("Time to First Byte(TTFB)网络请求耗时")]),t._v(" "),a("td",[t._v("responseStart – requestStart")]),t._v(" "),a("td",[t._v("TTFB是发出⻚面请求到接收到应答数据第一个字节所花费的毫秒数")])]),t._v(" "),a("tr",[a("td",[t._v("response")]),t._v(" "),a("td",[t._v("响应数据传输耗时")]),t._v(" "),a("td",[t._v("responseEnd – responseStart")]),t._v(" "),a("td",[t._v("观察网络是否正常")])]),t._v(" "),a("tr",[a("td",[t._v("dom")]),t._v(" "),a("td",[t._v("DOM解析耗时")]),t._v(" "),a("td",[t._v("domInteractive – responseEnd")]),t._v(" "),a("td",[t._v("观察DOM结构是否合理，是否有JS阻塞⻚面解析")])]),t._v(" "),a("tr",[a("td",[t._v("dcl")]),t._v(" "),a("td",[t._v("DOMContentLoaded 事件耗时")]),t._v(" "),a("td",[t._v("domContentLoadedEventEnd – domContentLoadedEventStart")]),t._v(" "),a("td",[t._v("当 HTML 文档被完全加载和解析完成之后，DOMContentLoaded 事件被触发，无需等待样式表、图像和子框架的完成加载")])]),t._v(" "),a("tr",[a("td",[t._v("resources")]),t._v(" "),a("td",[t._v("资源加载耗时")]),t._v(" "),a("td",[t._v("domComplete – domContentLoadedEventEnd")]),t._v(" "),a("td",[t._v("可观察文档流是否过大")])]),t._v(" "),a("tr",[a("td",[t._v("domReady")]),t._v(" "),a("td",[t._v("DOM阶段渲染耗时")]),t._v(" "),a("td",[t._v("domContentLoadedEventEnd – fetchStart")]),t._v(" "),a("td",[t._v("DOM树和⻚面资源加载完成时间，会触发domContentLoaded事件")])]),t._v(" "),a("tr",[a("td",[t._v("首次渲染耗时")]),t._v(" "),a("td",[t._v("首次渲染耗时")]),t._v(" "),a("td",[t._v("responseEnd-fetchStart")]),t._v(" "),a("td",[t._v("加载文档到看到第一帧非空图像的时间，也叫白屏时间")])]),t._v(" "),a("tr",[a("td",[t._v("首次可交互时间")]),t._v(" "),a("td",[t._v("首次可交互时间")]),t._v(" "),a("td",[t._v("domInteractive-fetchStart")]),t._v(" "),a("td",[t._v("DOM树解析完成时间，此时document.readyState为interactive")])]),t._v(" "),a("tr",[a("td",[t._v("首包时间耗时")]),t._v(" "),a("td",[t._v("首包时间")]),t._v(" "),a("td",[t._v("responseStart-domainLookupStart")]),t._v(" "),a("td",[t._v("DNS解析到响应返回给浏览器第一个字节的时间")])]),t._v(" "),a("tr",[a("td",[t._v("⻚面完全加载时间")]),t._v(" "),a("td",[t._v("⻚面完全加载时间")]),t._v(" "),a("td",[t._v("loadEventStart - fetchStart")]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",[t._v("onLoad")]),t._v(" "),a("td",[t._v("onLoad事件耗时")]),t._v(" "),a("td",[t._v("loadEventEnd – loadEventStart")]),t._v(" "),a("td",[t._v("-")])])])]),t._v(" "),a("h3",{attrs:{id:"代码工程方法获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码工程方法获取"}},[t._v("#")]),t._v(" 代码工程方法获取:")]),t._v(" "),a("ol",[a("li",[t._v("性能面板，火箭图")])]),t._v(" "),a("p",[a("strong",[t._v("lighthouse")])]),t._v(" "),a("p",[t._v("简单的性能测试 node 服务:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lighthouse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lighthouse'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" chromeLaucher "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chrome-launcher'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动一个 Chrome        ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" chrome "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" chromeLaucher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("launch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("            \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("logLevel")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'info'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("onlyCategories")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'performance'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("port        \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用 Lighthouse 对⻚面进行一个计算")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lighthouse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" report "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对报告写入文件")]),t._v("\n        fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("writeFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repost.html'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" report"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Report is done for '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lhr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("finalUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("kill")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("window.performance")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Welcome luyi"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// LCP， FP， FCP")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PerformanceObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entryList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" observer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" entries "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entryList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first-paint'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("            \n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("FP: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("ms")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("        \n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first-contentful-paint'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("            \n                console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("FCP: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("ms")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("        \n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("    \n    observer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("disconnect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entryTypes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'paint'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PerformanceObserver")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entryList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" observer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" entries "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entryList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" lastEntry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("entries"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("LCP: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("lastEntry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    \n    observer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("disconnect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entryTypes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'largest-contentful-paint'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    \n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        \n            fetchStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            connectEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            connectStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            requestStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            responseStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            responseEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            domLoading"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            domInteractive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            domContentLoadedEventStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            domContentLoadedEventEnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        \n            loadEventStart    \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" performance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("        \n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("     \n        connectTime(TCP连接耗时): ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("connectEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" connectStart"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("    \n        ttfbTime: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("responseStart "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" requestStart"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("    \n        responseTime(Response响应耗时): ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("responseEnd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" responseStart"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"从什么维度来剖析性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从什么维度来剖析性能"}},[t._v("#")]),t._v(" 从什么维度来剖析性能")]),t._v(" "),a("h3",{attrs:{id:"计算机的维度-i-o维度-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#计算机的维度-i-o维度-network"}},[t._v("#")]),t._v(" 计算机的维度： I/O维度 - network")]),t._v(" "),a("blockquote",[a("p",[t._v("App Cache"),a("br"),t._v("\n如何缓存，如何有效地缓存。")])]),t._v(" "),a("ul",[a("li",[t._v("http 缓存")]),t._v(" "),a("li",[t._v("强缓存\n"),a("ul",[a("li",[t._v("expries")]),t._v(" "),a("li",[t._v("cache-control\n"),a("ul",[a("li",[t._v("no-cache")])])])])]),t._v(" "),a("li",[t._v("协商缓存\n"),a("ul",[a("li",[t._v("last-modified -- if-modified-since")]),t._v(" "),a("li",[t._v("etag -- if-none-match")])])])]),t._v(" "),a("h4",{attrs:{id:"缓存中有哪些细节要注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存中有哪些细节要注意"}},[t._v("#")]),t._v(" 缓存中有哪些细节要注意")]),t._v(" "),a("ul",[a("li",[t._v("直接在浏览器输入 http:xxx/xxx/xx.html 该文件是不会被缓存的；")]),t._v(" "),a("li",[t._v("webpack 的hash 指纹，让该缓存的缓存\n"),a("ul",[a("li",[t._v("hash")]),t._v(" "),a("li",[t._v("content hash")]),t._v(" "),a("li",[t._v("chunk hash")])])]),t._v(" "),a("li",[t._v("modified 是根据时间判断，1s的时间，可能引发很多问题。")]),t._v(" "),a("li",[t._v("在 cdn 下，hash 缓存是否有比较好的效果。")]),t._v(" "),a("li",[t._v("没有了强缓存的必要字段值，浏览器还会走缓存吗？答案是肯定的（启发式缓存）。")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("DNS阶段")])]),t._v(" "),a("li",[a("p",[t._v("TCP阶段")])])]),t._v(" "),a("ul",[a("li",[t._v("http 1.0")]),t._v(" "),a("li",[t._v("http 1.1")]),t._v(" "),a("li",[t._v("http 2.0")]),t._v(" "),a("li",[t._v("http 3.0")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("RES REQ 阶段")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("包体积，如何缩减到极致")]),t._v(" "),a("ul",[a("li",[t._v("ugfily; minify")]),t._v(" "),a("li",[t._v("runtime; 按需引入 polyfill  -- @babel/preset-env {useBuiltIn:'entry'}")]),t._v(" "),a("li",[t._v("tree shaking;")])])]),t._v(" "),a("li",[a("p",[t._v("首屏加载的内容，如何进行分解")]),t._v(" "),a("ul",[a("li",[t._v("code splitting")])])]),t._v(" "),a("li",[a("p",[t._v("如何在tcp 数量和请求之间做 tradeoff")]),t._v(" "),a("ul",[a("li",[t._v("chrome 最大6个并发")])])]),t._v(" "),a("li",[a("p",[t._v("processing阶段前")]),t._v(" "),a("p",[t._v("浏览器一般是怎么加载文件的？\njs: async / defer -- 并行下载。")])])])])]),t._v(" "),a("h3",{attrs:{id:"memory-维度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#memory-维度"}},[t._v("#")]),t._v(" Memory 维度")]),t._v(" "),a("p",[t._v("Vue2 -- Vue3\n闭包\n监听器记得删除")]),t._v(" "),a("h4",{attrs:{id:"前端如何有效地扩容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端如何有效地扩容"}},[t._v("#")]),t._v(" 前端如何有效地扩容")]),t._v(" "),a("ul",[a("li",[t._v("iframe 无限 localStorage")]),t._v(" "),a("li",[t._v("indexedDB")]),t._v(" "),a("li",[t._v("享元模式")]),t._v(" "),a("li",[t._v("http2 key - value")])]),t._v(" "),a("h3",{attrs:{id:"cpu-维度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cpu-维度"}},[t._v("#")]),t._v(" CPU 维度")]),t._v(" "),a("h4",{attrs:{id:"如何有效减少密集计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何有效减少密集计算"}},[t._v("#")]),t._v(" 如何有效减少密集计算")]),t._v(" "),a("p",[t._v("BFF")]),t._v(" "),a("h4",{attrs:{id:"密集计算必须要发生"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#密集计算必须要发生"}},[t._v("#")]),t._v(" 密集计算必须要发生")]),t._v(" "),a("p",[t._v("WASM 、worker")]),t._v(" "),a("h4",{attrs:{id:"需要处理js执行的⻓任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要处理js执行的⻓任务"}},[t._v("#")]),t._v(" 需要处理JS执行的⻓任务")]),t._v(" "),a("p",[t._v("React 18\nRAF , RIdelC")]),t._v(" "),a("h4",{attrs:{id:"gpu-渲染-维度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gpu-渲染-维度"}},[t._v("#")]),t._v(" GPU/渲染 维度")]),t._v(" "),a("p",[t._v("transform + 复杂动画\nCLS 指标\nfragment 插入")]),t._v(" "),a("h2",{attrs:{id:"一些比较好的文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一些比较好的文章"}},[t._v("#")]),t._v(" 一些比较好的文章")]),t._v(" "),a("h3",{attrs:{id:"节流和防抖相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#节流和防抖相关"}},[t._v("#")]),t._v(" 节流和防抖相关")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://css-tricks.com/debouncing-throttling-explained-examples/",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过示例解释去抖动和节流"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzAxODE2MjM1MA==&mid=2651551467&idx=2&sn=2ce4ce1ec06c32aa698451128985b870&chksm=8025a12ab752283c66f1e529664fcc9fe272d5d500f8daedcc35e85f79baa69b62a208b2235a&scene=0#wechat_redirect/",target:"_blank",rel:"noopener noreferrer"}},[t._v("谈谈JS中的函数节流"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/entry/58a3911b570c35006cdc2d6a/",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript函数节流和函数防抖之间的区别"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.cn/post/6844903609943998477",target:"_blank",rel:"noopener noreferrer"}},[t._v("从lodash源码学习节流和防抖"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.cn/post/6844903705763020807",target:"_blank",rel:"noopener noreferrer"}},[t._v("理解并优化函数节流Throttle"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"浏览器引擎渲染性能相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器引擎渲染性能相关"}},[t._v("#")]),t._v(" 浏览器引擎渲染性能相关")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.html5rocks.com/en/tutorials/internals/howbrowserswork/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How Browsers Work: Behind the scenes of modern web browsers"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"http://taligarsiel.com/Projects/howbrowserswork1.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("How browsers work"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://blog.logrocket.com/how-browser-rendering-works-behind-the-scenes-6782b0e8fb10",target:"_blank",rel:"noopener noreferrer"}},[t._v("How browser rendering works—behind the scenes"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"http://frontendbabel.info/articles/webpage-rendering-101/",target:"_blank",rel:"noopener noreferrer"}},[t._v("What Every Frontend Developer Should Know About Webpage Rendering"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.cnblogs.com/lhb25/p/how-browsers-work.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端⽂摘：深⼊解析浏览器的幕后⼯作原理"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/30558018",target:"_blank",rel:"noopener noreferrer"}},[t._v("从 Chrome 源码看浏览器如何加载资源"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5bbaa7da6fb9a05d3761aafe",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器内核渲染：重建引擎"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/entry/5c26d05d5188257a937fb6b2",target:"_blank",rel:"noopener noreferrer"}},[t._v("体现⼯匠精神的 Resource Hints"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.itcodemonkey.com/article/10417.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器⻚⾯渲染机制，你真的弄懂了吗"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://insights.thoughtworks.cn/critical-rendering-path-and-optimization-strategy/",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端不⽌：Web 性能优化 – 关键渲染路径以及优化策略"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://zcfy.cc/article/optimising-the-front-end-for-the-browser-hacker-noon-2847.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("浏览器前端优化"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/1kQ-cyQmLfLcYiLiJ_ViwA?",target:"_blank",rel:"noopener noreferrer"}},[t._v("浅析前端⻚⾯渲染机制"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/entry/5893fbe88d6d8100582e8b7f",target:"_blank",rel:"noopener noreferrer"}},[t._v("浅析渲染引擎与前端优化"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/sundway/blog/issues/2",target:"_blank",rel:"noopener noreferrer"}},[t._v("渲染性能"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://segmentfault.com/a/1190000002629708",target:"_blank",rel:"noopener noreferrer"}},[t._v("Repaint 、Reflow 的基本认识和优化 (2) "),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"动画性能相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动画性能相关"}},[t._v("#")]),t._v(" 动画性能相关")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/dev-guides/hh920765(v=vs.85)",target:"_blank",rel:"noopener noreferrer"}},[t._v("Timing control for script-based animations"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://medium.com/@bdc/gain-motion-superpowers-with-requestanimationframe-ecc6d5b0d9a4",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gain Motion Superpowers with requestAnimationFrame"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://github.com/amfe/article/issues/47",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS Animation 性能优化"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://segmentfault.com/a/1190000000391529",target:"_blank",rel:"noopener noreferrer"}},[t._v("GSAP的动画快于 jQuery 吗？为何？"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/entry/58b0187c1b69e60058a09faf",target:"_blank",rel:"noopener noreferrer"}},[t._v("Javascript ⾼性能动画与⻚⾯渲染"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650585331&idx=1&sn=c2d55ab4c5458d3dcda25188fd608079&source=41#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("也许你不知道，JS animation ⽐ CSS 更快！"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.w3cplus.com/animation/progressive-web-animation.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("渐进式动画解决⽅案"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5ad71f39f265da239f07e862",target:"_blank",rel:"noopener noreferrer"}},[t._v("你应该知道的 requestIdleCallback"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"http://taobaofed.org/blog/2016/04/25/performance-composite/",target:"_blank",rel:"noopener noreferrer"}},[t._v("⽆线性能优化：Composite"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5c8a1db15188257e9044ec52",target:"_blank",rel:"noopener noreferrer"}},[t._v("优化动画卡顿：卡顿原因分析及优化⽅案"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/kC7RmozaG5bWjIqdiZat7A?",target:"_blank",rel:"noopener noreferrer"}},[t._v("⼀篇⽂章说清浏览器解析和 CSS（GPU）动画优化"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"实战案例相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实战案例相关"}},[t._v("#")]),t._v(" 实战案例相关")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://dev.to/goenning/how-we-reduced-our-initial-jscss-size-by-67-3ac0?utm_source=mybridge&utm_medium=blog&utm_campaign=read_more?add=add",target:"_blank",rel:"noopener noreferrer"}},[t._v("How we reduced our initial JS/CSS size by 67%"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.smashingmagazine.com/2019/01/front-end-performance-checklist-2019-pdf-pages/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Front-End Performance Checklist 2019"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://imweb.io/topic/5b6fd3c13cb5a02f33c013bd",target:"_blank",rel:"noopener noreferrer"}},[t._v("⽹站性能优化实战——从 12.67s 到 1.06s 的故事"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&mid=2247489935&idx=1&sn=f59537133b8548caf5a513ee95ecc1be&chksm=f951acccce2625da71bacdb5cd814bcdc8900c293c56662bbad6e39af40ebd451837d3866404&token=1623409489&lang=zh_CN&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端⿊科技：美团⽹⻚⾸帧优化实践"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5c398a81e51d4551e13b88f3?add=asd",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web 字体图标-⾃动化⽅案"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://mp.weixin.qq.com/s/uWuzwE1jPHbd73Y3UiyezA",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS 加载慢？⾕歌⼤神带你⻜!"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://my.oschina.net/zhangstephen/blog/1601383?from=juejin",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端性能优化（三） 移动端浏览器前端优化策略"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5c7e578de51d4541c11413fc",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS @font-face 性能优化"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://juejin.im/post/5c931c4a6fb9a070dc28923b",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动 Web 性能优化从⼊⻔到进阶"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://segmentfault.com/a/1190000005147979",target:"_blank",rel:"noopener noreferrer"}},[t._v("记⼀次惊⼼动魄的前端性能优化之旅"),a("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=s.exports}}]);